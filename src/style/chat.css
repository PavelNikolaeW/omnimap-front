:root{
--chat-bg:#ffffff; --chat-panel:#0f172a; --chat-accent:#111827; --chat-accent-2:#2563eb; --chat-border:#e5e7eb;
--chat-soft:#f8fafc; --chat-shadow: 0 20px 50px rgba(0,0,0,.25);
}
.llm-launch{position:fixed; right:16px; bottom:16px; z-index:9999; border:0; border-radius:999px; padding:14px 16px; background:var(--chat-accent); color:#fff; font:600 14px system-ui, -apple-system; box-shadow:0 10px 30px rgba(0,0,0,.25); cursor:pointer}
.llm-wrap{
  position:fixed;
  /*inset:20px;*/
  z-index:9999;
  width:100vw;
  height:100vh;
  border-radius:16px;
  overflow:hidden;
  background:#fff;
  box-shadow:0 0 50px rgba(0,0,0,.5);
  display:none;
}
.llm-grid{display:grid; grid-template-columns:0.25fr 1fr; height:100%}
.llm-left{background:var(--chat-soft); border-right:1px solid var(--chat-border); display:flex; flex-direction:column}
.llm-left.collapsed { display: none; }
.llm-left-h{display:flex; align-items:center; justify-content:space-between; padding:10px 12px; border-bottom:1px solid var(--chat-border); background:#fff}
.llm-left-h b{font:600 14px system-ui}
.llm-left-list{overflow:auto; padding:8px}
.llm-item{display:flex; gap:8px; align-items:center; padding:10px; border-radius:10px; border:1px solid transparent; cursor:pointer}
.llm-item:hover{background:#fff}
.llm-item.active{border-color:var(--chat-accent-2); background:#eef2ff}
.llm-item-title{font:600 13px system-ui; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; max-width: 200px}
.llm-item-time{font:12px system-ui; color:#6b7280}
.llm-right{display:grid; grid-template-rows:auto 1fr auto; height:100%}
.llm-hdr{display:flex; align-items:center; gap:8px; padding:10px 12px; border-bottom:1px solid var(--chat-border); background:#fff}
.llm-hdr b{font:600 14px system-ui}
.llm-spacer{flex:1}
.llm-btn{border:1px solid var(--chat-border); background:#fff; border-radius:10px; padding:8px 10px; font:600 13px system-ui; cursor:pointer}
.llm-btn.primary{background:var(--chat-accent); color:#fff; border-color:transparent}
.llm-body{overflow:auto; background:var(--chat-soft); padding:14px}
.llm-msg{max-width: 80ch; margin: 10px auto; display:flex; gap:10px}
.llm-bubble{padding:12px 14px; border-radius:12px; border:1px solid var(--chat-border); background:#fff; white-space:pre-wrap; word-wrap:break-word}
.llm-user .llm-bubble{background:#111; color:#fff; border-color:#111}
.llm-ava{width:28px; height:28px; border-radius:999px; background:#e5e7eb; display:flex; align-items:center; justify-content:center; font:600 12px system-ui}
.llm-ftr{display:flex; gap:8px; align-items:flex-end; padding:10px 12px; border-top:1px solid var(--chat-border); background:#fff}
.llm-input{flex:1; min-height: 42px; max-height: 30dvh; overflow:auto; padding:10px 12px; border:1px solid var(--chat-border); border-radius:12px; font:14px system-ui}
.llm-ctrls{display:flex; gap:8px}
.llm-icon{border:1px solid var(--chat-border); background:#fff; width:42px; height:42px; border-radius:12px; display:inline-flex; align-items:center; justify-content:center; cursor:pointer}
.llm-close{border:0; background:transparent; font:600 16px system-ui; cursor:pointer}


/* Mobile */
@media (max-width: 840px){
.llm-wrap{inset:0; right:0; width:100vw; height:100dvh; border-radius:0}
.llm-grid{grid-template-columns:1fr}
.llm-left{position:absolute; inset:0; transform:translateX(-100%); transition:transform .25s ease; z-index:2}
.llm-left.open{transform:translateX(1)}
}


/* Markdown content (highlight.js defaults will apply) */
.llm-bubble :is(h1,h2,h3){margin:12px 0 8px}
.llm-bubble pre{padding:10px; border-radius:10px; background:#0b1020; color:#e2e8f0; overflow:auto}
.llm-bubble code{font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}

.llm-input:empty:before, .llm-input[data-empty="1"]:before{content: attr(data-placeholder); color:#9ca3af}
/* iOS safe-area padding for footer */
.llm-ftr{padding-bottom: calc(10px + env(safe-area-inset-bottom));}